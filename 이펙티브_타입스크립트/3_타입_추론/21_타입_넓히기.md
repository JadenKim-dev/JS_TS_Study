# 21. 타입 넓히기

타입스크립트에서는 타입 유추 과정에서 할당한 상수 값을 바탕으로 타입을 결정해야 한다.  
이는 단일 값을 바탕으로 할당 가능한 값의 집합인 타입을 유추하는 것으로, 타입 넓히기라고 부른다.

타입 시스템에서는 타입 넓히기를 할 때 작성자의 의도를 추측하고, 명확성과 유연성 사이에서 균형을 유지하려고 한다.  
하지만 언제나 그 추측한 답이 옳을 수는 없다.  
예를 들어 다음과 같이 3D 벡터 타입과, 해당 타입에서 특정 요소 값을 반환하는 함수를 정의했다고 하자.  
이 때 변수 x에 값 'x'를 할당하여 함수의 매개변수로 사용하려고 하면 타입 오류가 발생한다.

```ts
interface Vector3 {
  x: number;
  y: number;
  z: number;
}
function getComponent(vector: Vector3, axis: "x" | "y" | "z") {
  return vector[axis];
}

let x = "x"; // string
getComponent({ x: 10, y: 20, z: 30 }, x); // 'string' 형식의 인수는 'x'|'y'|'z' 형식에 할당할 수 없습니다.
```

이는 변수 x가 string 타입으로 유추되었기 때문에 발생하는 문제이다.  
let으로 변수를 선언하면 해당 변수에는 다양한 값을 할당할 수 있기 때문에, string literal 타입이 아닌 일반 string 타입으로 유추된다.

사실 'x' 값의 상위 집합에는 `any`, `string | number` 등의 다양한 타입이 존재한다.  
그 중 string을 골랐기 때문에, 변수가 선언된 후로 단일한 타입만 할당한다는 원칙을 지킬 수 있게 되었다.

```ts
let x = "x";
x = "a";
x = "Four score and seven years ago...";
x = 3; // 'number' 형식은 'string' 형식에 할당할 수 없습니다.
```
